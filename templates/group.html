<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0" />
    <title>Group - RankIt</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</head>

<body>
    <!-- NAVBAR -->
    <header class="top-nav">
        <div class="nav-left">
            <a href="home.html" class="logo">RankIt</a>
        </div>
        <div class="nav-right">
            <span class="nav-username"></span>
            <a href="home.html" class="nav-link">My Groups</a>
            <a href="discover.html" class="nav-link">Discover</a>
            <a href="create-group.html" class="nav-link">Create Group</a>
            <a href="login.html" class="btn btn-outline btn-logout">Logout</a>
        </div>
    </header>

    <div class="container">

        <!-- PAGE HEADER -->
        <div class="page-header">
            <div class="header-content">
                <div>
                    <h1 id="group-title">Loading group...</h1>
                    <p id="group-description">Fetching group details...</p>
                </div>

                <div class="header-actions">
                    <button class="btn btn-error" id="delete-group-btn" style="display: none;">
                        Delete Group
                    </button>
                    <button class="btn btn-secondary" id="leave-group-btn" style="display: none;">
                        Leave Group
                    </button>
                </div>

            </div>
        </div>

        <!-- MAIN LAYOUT: LEFT (LEADERBOARD) + RIGHT (STATS SIDEBAR) -->
        <div class="layout-2col">
            
            <!-- LEFT COLUMN: LEADERBOARD -->
            <div class="leaderboard-col">

                <!-- Controls Bar -->
                <div class="controls-bar">
                    <input 
                        id="item-search" 
                        type="text"
                        placeholder="Search items..."
                        class="search-input"
                    />

                    <label class="filter-toggle">
                        <input type="checkbox" id="my-rated-filter">
                        My ratings only
                    </label>

                    <select id="sort-mode" class="sort-select">
                        <option value="rank">Sort: Default Rank</option>
                        <option value="avg">Sort: Avg Rating</option>
                        <option value="your">Sort: Your Rating</option>
                        <option value="alpha">Sort: A → Z</option>
                        <option value="most">Sort: Most Ratings</option>
                        <option value="new">Sort: Newest</option>
                    </select>

                    <button 
                        class="btn btn-primary"
                        onclick="openAddItemModal()">
                        Add Item
                    </button>
                </div>

                <!-- Leaderboard List -->
                <div class="items-list"></div>

                <!-- Pagination -->
                <div class="pagination-bar">
                    <button id="prev-page" class="btn btn-secondary btn-sm">Prev</button>
                    <span id="page-info"></span>
                    <button id="next-page" class="btn btn-secondary btn-sm">Next</button>
                </div>
            </div>

            <!-- RIGHT COLUMN: PERSONAL STATS -->
            <div class="stats-col">
                <div class="stats-card">
                    <h3>Your Stats</h3>
                    <div id="user-stats">
                        <!-- Script.js will populate:
                             - Your avg rating
                             - Count items rated
                             - Top 5 items
                             - Bottom 5 items -->
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- ADD ITEM MODAL -->
    <div class="modal" id="addItemModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Item</h3>
                <button class="close" onclick="closeAddItemModal()">×</button>
            </div>

            <div class="modal-body">
                <form id="add-item-form">
                    <div class="form-group">
                        <label for="item-name">Item Name</label>
                        <input type="text" id="item-name" required placeholder="e.g., Thriller" />
                    </div>

                    <div class="form-group">
                        <label for="item-description">Description</label>
                        <textarea id="item-description" rows="3" placeholder="Optional"></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeAddItemModal()">
                            Cancel
                        </button>
                        <button type="submit" class="btn btn-primary">
                            Add Item
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <!-- EDIT ITEM MODAL -->
    <div class="modal" id="editItemModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Item</h3>
                <button class="close" onclick="closeEditItemModal()">×</button>
            </div>

            <div class="modal-body">
                <form id="edit-item-form">
                    <input type="hidden" id="edit-item-id">

                    <div class="form-group">
                        <label for="edit-item-name">Item Name</label>
                        <input type="text" id="edit-item-name" required />
                    </div>

                    <div class="form-group">
                        <label for="edit-item-description">Description</label>
                        <textarea id="edit-item-description" rows="3"></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeEditItemModal()">
                            Cancel
                        </button>
                        <button type="submit" class="btn btn-primary">
                            Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <script src="script.js"></script>
</body>
</html>
